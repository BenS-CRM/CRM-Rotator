<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Get Target CRM App</title>
  <style>
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:#0f172a; color:#e5e7eb; }
    .wrap { min-height: 100vh; display:grid; place-items:center; padding:24px; }
    .card { max-width: 520px; width:100%; background:#111827; border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:22px; }
    h1 { margin:0 0 8px; font-size:1.5rem; }
    p { margin:8px 0 16px; color:#9ca3af; }
    .status { display:inline-flex; align-items:center; gap:8px; background:rgba(34,197,94,.08); border:1px solid rgba(34,197,94,.25); color:#e5e7eb; padding:8px 12px; border-radius:10px; margin-bottom:12px; }
    .dot { width:8px; height:8px; border-radius:50%; background:#22c55e; }
    .buttons { display:grid; grid-template-columns:1fr; gap:10px; margin-top:8px; }
    @media (min-width:500px){ .buttons { grid-template-columns:1fr 1fr; } }
    a.btn { display:flex; align-items:center; justify-content:center; gap:8px; text-decoration:none; color:#fff; background:#2563eb; border:1px solid rgba(255,255,255,.1); padding:12px 14px; border-radius:10px; font-weight:600; }
    a.btn.secondary { background:transparent; color:#e5e7eb; border-color:rgba(255,255,255,.18); }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <h1 id="title">Get the Target CRM App</h1>
      <div class="status" id="statusRow" aria-live="polite">
        <span class="dot" aria-hidden="true"></span>
        <span id="statusText">Detecting your device‚Ä¶</span>
      </div>
      <p>If you aren‚Äôt redirected automatically, choose your store below.</p>

      <div class="buttons">
        <a id="btn-ios" class="btn" href="#" rel="noopener">üçé Open in App¬†Store</a>
        <a id="btn-android" class="btn" href="#" rel="noopener">ü§ñ Open in Google¬†Play</a>
        <a id="btn-web" class="btn secondary" href="#" rel="noopener">üåê Visit our website</a>
      </div>
    </main>
  </div>

  <script>
    (function(){
      // Store URLs
      const IOS_URL = "https://apps.apple.com/us/app/target-crm/id1536204342";
      const ANDROID_URL = "https://play.google.com/store/apps/details?id=com.targetcrm.app&pcampaignid=web_share";
      const WEB_FALLBACK = "https://www.targetcrm.com";

      // Hook up buttons
      const statusText = document.getElementById("statusText");
      const btnIOS = document.getElementById("btn-ios");
      const btnAndroid = document.getElementById("btn-android");
      const btnWeb = document.getElementById("btn-web");
      btnIOS.href = IOS_URL;
      btnAndroid.href = ANDROID_URL;
      btnWeb.href = WEB_FALLBACK;

      // Device detection
      const ua = (navigator.userAgent || navigator.vendor || window.opera || "").toLowerCase();
      const isAndroid = /android/.test(ua);
      const isIOS = /ipad|iphone|ipod/.test(ua) || ((/macintosh/.test(ua)) && "ontouchend" in document);

      // Optional manual test ?store=ios/android
      const forced = new URLSearchParams(location.search).get("store");
      let target = null;

      if (forced === "ios") target = IOS_URL;
      else if (forced === "android") target = ANDROID_URL;
      else if (isAndroid) target = ANDROID_URL;
      else if (isIOS) target = IOS_URL;

      if (target) {
        statusText.textContent = "Redirecting...";
        setTimeout(() => window.location.assign(target), 400);
      } else {
        statusText.textContent = "Choose your store below.";
      }
    })();
  </script>
</body>
</html>
